<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Eclipse on Windows - Kitodo.Production</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Kitodo.Production</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Developer <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Getting started</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../" class="dropdown-item">Building</a>
</li>
            
<li>
    <a href="../demo/" class="dropdown-item">Build integrated demo</a>
</li>
            
<li>
    <a href="../development-version/" class="dropdown-item">Build development version</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Eclipse on Windows</a>
</li>
            
<li>
    <a href="../virtualbox/" class="dropdown-item">Create VirtualBox Appliance</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../guidelines/" class="dropdown-item">Guidelines</a>
</li>
                                    
<li>
    <a href="../../architecture/" class="dropdown-item">System architecture</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Workflow</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../architecture/workflow/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../../architecture/workflow/Modeler/" class="dropdown-item">Modeler</a>
</li>
            
<li>
    <a href="../../architecture/workflow/Diagram_template_processing/" class="dropdown-item">Diagram template processing</a>
</li>
            
<li>
    <a href="../../architecture/workflow/Template_process_creation/" class="dropdown-item">Create process out of template</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">API documentation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../api/" class="dropdown-item">Application Programming Interface (API)</a>
</li>
            
<li>
    <a href="../../api/activemq_jms_api/" class="dropdown-item">Active MQ webservices</a>
</li>
            
<li>
    <a href="../../api/jersey_jaxrs_api/" class="dropdown-item">Jersey WebAPI</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../tests/" class="dropdown-item">Tests</a>
</li>
                                    
<li>
    <a href="../../javadoc/" class="dropdown-item">Javadoc</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">BestPractice</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../user/introduction/" class="dropdown-item">Das erste mal mit Kitodo arbeiten</a>
</li>
            
<li>
    <a href="../../../user/introduction/application_notes/" class="dropdown-item">Anwendungshinweise und Weiteres</a>
</li>
            
<li>
    <a href="../../../user/introduction/user_documentation/" class="dropdown-item">Dokumentationen der Anwenderbibliotheken</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../../user/introduction/gettingstarteduser/" class="dropdown-item">Getting Started</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Using</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../user/introduction/using/" class="dropdown-item">Anwenderdokumentation</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../development-version/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../virtualbox/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/kitodo/kitodo-production/edit/master/docs/developer/gettingstarted/eclipse-windows.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#how-to-create-a-developer-workspace-for-kitodoproduction-with-eclipse-on-windows" class="nav-link">How to create a developer workspace for Kitodo.Production with Eclipse on Windows</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#prerequisites" class="nav-link">Prerequisites:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#configure-the-paths" class="nav-link">Configure the PATHs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#get-the-source-code" class="nav-link">Get the source code</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-the-data-file-structure" class="nav-link">Create the data-file structure</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-your-config-local" class="nav-link">Create your config-local</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#run-maven" class="nav-link">Run Maven</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#set-up-the-database" class="nav-link">Set up the database</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#exclude-the-eclipse-project-and-runtime-files-from-git" class="nav-link">Exclude the Eclipse .project and runtime files from Git</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#configure-eclipse" class="nav-link">Configure Eclipse</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#prepare-the-web-application" class="nav-link">Prepare the web application</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="how-to-create-a-developer-workspace-for-kitodoproduction-with-eclipse-on-windows">How to create a developer workspace for Kitodo.Production with Eclipse on Windows</h1>
<h2 id="prerequisites">Prerequisites:</h2>
<ul>
<li>Make sure you have <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SE Development Kit</a> in at least version 11 installed</li>
<li>Make sure you have <a href="https://git-scm.com/downloads">Git</a> installed</li>
<li>Make sure you have <a href="https://maven.apache.org/download.cgi">Maven</a> installed</li>
<li>Make sure you have <a href="https://www.eclipse.org/downloads/">Eclipse IDE for Java EE Developers</a> installed</li>
</ul>
<h2 id="configure-the-paths">Configure the <code>PATH</code>s</h2>
<p>Make sure the Maven <code>bin</code> directory is on your <code>PATH</code>, and that <code>JAVA_HOME</code> points to the root directory of the JDK (not the JRE). Right-click the start menu, select <em>System</em>, <em>Extended system settings</em>, <em>Environment variables</em> to do so. Be careful when you try to add an entry to the path: Click <em>New</em>, then type at least one character into the appearing text box before clicking <em>Browse…</em>. Otherwise, instead, the last entry in the list will be replaced. You need to restart an open <code>cmd.exe</code> window for the changes to take effect.</p>
<p>Make sure the path of your Eclipse Workspace does not contain any dot. To check this, right-click on your Eclipse workspace folder in Windows Explorer, select Properties, Security, and examine the object name. If necessary, move your workspace or create a new one in a suitable location.</p>
<h2 id="get-the-source-code">Get the source code</h2>
<p>If you have not done yet, <a href="https://help.github.com/articles/fork-a-repo/">fork</a> the <a href="https://github.com/kitodo/kitodo-production">project repository</a> on GitHub. Use Git (using a tool like <a href="https://tortoisegit.org/">TortoiseGit</a>, or the command line) to clone the repository as a subdirectory into your Eclipse workspace.</p>
<h2 id="create-the-data-file-structure">Create the data-file structure</h2>
<p>Create the data-file structure required by Kitodo.Production (outside the Eclipse workspace):</p>
<pre><code>mkdir config debug logs messages metadata modules plugins plugins\command plugins\import plugins\opac plugins\step plugins\validation rulesets scripts temp users xslt
</code></pre>
<p>Copy all <code>kitodo_*.xml</code> from <code>Kitodo\src\main\resources\</code> into the <code>config</code> directory.</p>
<p>Copy the contents of <code>Kitodo\rulesets\</code> to the <code>rulesets</code> directory.</p>
<p>Create the following four batch files with the following content in the in the <code>scripts</code> directory:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>script_createDirMeta.bat</td>
<td><code>mkdir %1</code></td>
</tr>
<tr>
<td>script_createDirUserHome.bat</td>
<td><code>mkdir %2</code></td>
</tr>
<tr>
<td>script_createSymLink.bat</td>
<td><code>mklink /d %2 %1</code></td>
</tr>
<tr>
<td>script_deleteSymLink.bat</td>
<td><code>rmdir %1</code></td>
</tr>
</tbody>
</table>
<p>Copy <code>*.xsl</code> from <code>Kitodo\src\main\resources\</code> to the folder <code>xslt</code>.</p>
<h2 id="create-your-config-local">Create your <code>config-local</code></h2>
<p>In the source directory that you just cloned, create a folder named <code>config-local</code>. Copy the following files there:</p>
<p><em>From <code>Kitodo\src\main\resources\</code>:</em>
* <code>contentServerConfig.xml</code>
* <code>hibernate.cfg.xml</code>
* <code>kitodo_config.properties</code></p>
<p><em>From <code>Kitodo-DataManagement\src\main\resources\db\config\</code>:</em>
* <code>flyway.properties</code></p>
<p>Edit the following parameters your copy of <code>kitodo_config.properties</code> to point to the data directories you created. Use forward slashes as separators, and end the path entries with a forward slash. You need to edit the following parameters:
* <code>directory.config=D:/path to/config/</code>
* <code>directory.rulesets=D:/path to/rulesets/</code>
* <code>directory.xslt=D:/path to/xslt/</code>
* <code>directory.metadata=D:/path to/metadata/</code>
* <code>directory.users=D:/path to/users/</code>
* <code>directory.temp=D:/path to/temp/</code>
* <code>script_createDirUserHome=D:/path to/scripts/script_createDirUserHome.bat</code>
* <code>script_createDirMeta=D:/path to/scripts/script_createDirMeta.bat</code>
* <code>script_createSymLink=D:/path to/scripts/script_createSymLink.bat</code>
* <code>script_deleteSymLink=D:/path to/scripts/script_deleteSymLink.bat</code>
* <code>directory.messages=D:/path to/messages/</code>
* <code>directory.debug=D:/path to/debug/</code>
* <code>directory.modules=D:/path to/modules/</code>
* <code>directory.plugins=D:/path to/plugins/</code></p>
<p>Edit <code>Kitodo\src\main\resources\log4j.xml</code> so that <code>&lt;Property name="filename"&gt;</code> points to your <code>D:/path to/logs</code>.</p>
<h2 id="run-maven">Run Maven</h2>
<p>On the command line, change to the directory you just cloned and execute the following command:</p>
<pre><code>mvn clean install
</code></pre>
<h2 id="set-up-the-database">Set up the database</h2>
<p>Create the MqSQL Database and the user:</p>
<pre><code>create database kitodo;
grant all privileges on kitodo.* to kitodo@localhost identified by ´kitodo´;
flush privileges;
</code></pre>
<p>First load <code>schema.sql</code>, then <code>default.sql</code> from the folder <code>Kitodo\setup</code> into the database. There will be warnings because the scripts handle some cases for backward compatibility. You can safely ignore them.</p>
<p>Then, change into the subfolder Kitodo-DataManagement and execute the following command to migrate your database:</p>
<pre><code>mvn clean install -Pflyway
</code></pre>
<h2 id="exclude-the-eclipse-project-and-runtime-files-from-git">Exclude the Eclipse <code>.project</code> and runtime files from Git</h2>
<ul>
<li>Go to the file system and find the <code>.git</code> folder in the project folder in your Eclipse workspace. By default, this folder is hidden, so you need to configure your Explorer to show hidden files and folders to see it.</li>
<li>Find the <code>info</code> subfolder in that folder, o create it if it is missing.</li>
<li>Find or create a file named <code>exclude</code> (no extension).</li>
<li>List any files and directories you need to exclude in that file.</li>
<li>Sometimes you need to restart Eclipse for changes to take effect.</li>
</ul>
<p>Example content:</p>
<pre><code>**/.classpath
**/.project
**/.settings
</code></pre>
<h2 id="configure-eclipse">Configure Eclipse</h2>
<p>Eclipse’s Maven import will create a lot of projects in your workspace which all need a bit of configuration, as listed below. You can simplify this by creating a new workspace and only configure the workspace settings once accordingly.</p>
<p>Add projects: In Eclipse, select <em>File</em>, <em>Import</em>, <em>Maven</em>, <em>Existing Maven project</em>. Point the <em>root directory</em> to your project directory and import all projects.</p>
<p><strong>Tomcat:</strong> You have to increase the Tomcat startup time-out. You can do so from the server in the <em>Servers</em> view. If the Tomcat is not yet listed, select <em>Window</em>, <em>Preferences</em>, <em>Server</em>, <em>Runtime Environments</em> and add it there. Double-click the server in the <em>Servers</em> view, extend the time-out on the appearing page under <em>Timeouts</em>. You have to click <em>save</em> for the changes to take effect. I also recommend to open the <em>launch configuration</em> (from the same page), <em>Arguments</em>, and add <code>-Xmx3g</code> to <em>VM arguments</em>.</p>
<p><strong>Code formatter:</strong> Import <code>config\Kitodo-IDE-formatting-Eclipse.xml</code> and set the code formatter to use the imported <em>Kitodo-Java Formatter Settings</em>.</p>
<p><strong>Imports:</strong> The project has decided not to import packages, but only to explicitly import used classes, and to sort them alphabetically. Go to the Organize Imports page, remove all packages to be handled specially from the list, and set the both <em>Number of inputs needed</em> values to something like <code>2147483647</code>.</p>
<p><strong>Checkstyle:</strong> Get the Checkstyle plug-in and configure it to use the config file <code>config\checkstyle.xml</code>.</p>
<h2 id="prepare-the-web-application">Prepare the web application</h2>
<p>For any further steps and throughout all development, make sure Elasticsearch is running. You start it by running <code>elasticsearch.bat</code> in the bin folder of the unzipped installation.</p>
<p>In Eclipse, right-click on the kitodo project, select run as, run on server, to launch Kitodo.Production in your Tomcat.</p>
<p>Access the web application under <em>http://<i></i>localhost:8080/kitodo</em> and log in as user <code>testadmin</code> with password <code>test</code>.</p>
<p>From the navigation menu, select <em>Indexing</em>. First, create the elasticsearch mapping by clicking the corresponding button on the top of the page. Then, create the whole index by clicking on the start indexing button on the bottom of the page. When this has finished, you have to log out and back into the web application.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
